<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.0.0-beta5
* @link https://tabler.io
* Copyright 2018-2022 The Tabler Authors
* Copyright 2018-2022 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Yes Aladin!</title>

    <!-- CSS files -->
    <link th:href="@{/css/tabler.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/tabler-flags.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/tabler-payments.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/tabler-vendors.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/demo.min.css}" rel="stylesheet"/>

    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css"/>
</head>
<body>
<!-- Libs JS -->
<script type="text/javascript" th:src="@{/libs/apexcharts/dist/apexcharts.min.js}"></script>
<!-- Tabler Core -->
<script type="text/javascript" th:src="@{/js/tabler.min.js}"></script>
<script type="text/javascript" th:src="@{/js/demo.min.js}"></script>
<!-- Toast UI -->
<script src="https://uicdn.toast.com/editor/2.0.0/toastui-editor-all.min.js"></script>

<div class="wrapper">
    <!-- TODO 1 : HEADER -->
    <div th:replace="~{fragments/header :: fragment-header}"></div>

    <!-- TODO 2 : NAV-BAR -->
    <div th:replace="~{fragments/navbar :: fragment-nav-bar}"></div>

    <!-- TODO 3: BODY -->
    <div class="page-body">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div th:if="${isEbook} == true">
                            <h2 class="badge bg-azure-lt">E-Book</h2>
                        </div>
                        <h1 th:text="${title}"></h1>
                        <h3>저자 : <div th:each="author: ${authors}" style="display: inline"><p th:text="|${author} |" style="display: inline"></p><p th:if="${authorStat.last} != true" style="display: inline">, </p></div> | 출판사 : <p th:text="${publisher}" style="display: inline"></p></h3>
                    </div>
                </div>

                <div class="card-body divide-y-4">
                    <div class="row g-2 g-md-3 divide-x">
                        <div class="col-4">
                            <div class="img-responsive img-responsive-3x4 rounded-3 border"
                                 th:style="|background-image: url(${thumbnailFileUrl})|"></div>
                        </div>
                        <div class="col-8 divide-y">
                            <div class="col-12">
                                <p th:text="|정가 : ${actualPrice}원|"></p>
                                <p th:text="|판매가(할인율) : ${sellingPrice}원(${discountRate}%)|"></p>
                                <p th:text="|포인트 적립금(포인트 적립율) : ${pointPrice}원(${pointRate}%)|"></p>
                            </div>
                            <div class="col-12">
                                <p> 배송비 </p>
                            </div>
                            <!-- 주문 관련 -->
                        </div>
                    </div>
                    <div class="row g-2">
                        <p>연관상품</p>
                    </div>
                    <div class="row g-2 divide-y">
                        <div class="col-12">
                            <h2>품목정보</h2>
                            <p th:text="|출판일 : ${publishedDate}|"></p>
                            <p th:text="|ISBN13 : ${isbn}|"></p>
                            <div th:if="${isSubscriptionAvailable} == true">
                                <p th:text="|ISSN11 : ${issn}|"></p>
                            </div>
                        </div>
                        <div class="col-12">
                            <h2>카테고리 분류</h2>
                            <p>카테고리 1</p>
                            <p>카테고리 2</p>
                            <p>카테고리 3</p>
                        </div>
                        <div class="col-12">
                            <h2>목차</h2>
                            <p th:text="${contents}"></p>
                        </div>
                        <div class="col-12">
                            <h2>책 소개</h2>
                            <div id="viewer"></div>
                            <input type="hidden" id="description" th:value="${description}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TODO 4 : footer -->
    <div th:replace="~{fragments/footer :: fragment-footer}"></div>
</div>
<!-- DOMContentLoaded관련 Script import -->
<div th:replace="~{fragments/script :: fragment-script}"></div>
<script>
    console.log(document.querySelector('#description').value);

    const viewer = toastui.Editor.factory({
        el: document.querySelector('#viewer'),
        viewer: true,
        height: '500px',
        initialValue: document.querySelector('#description').value
    })
</script>
</body>
</html>
