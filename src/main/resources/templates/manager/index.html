<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.0.0-beta5
* @link https://tabler.io
* Copyright 2018-2022 The Tabler Authors
* Copyright 2018-2022 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Yes Aladin!</title>
    <!-- CSS files -->
    <link th:href="@{/css/tabler.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/tabler-flags.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/tabler-payments.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/tabler-vendors.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/demo.min.css}" rel="stylesheet"/>
</head>
<body>
<!-- Libs JS -->
<script type="text/javascript" th:src="@{/libs/apexcharts/dist/apexcharts.min.js}"></script>
<!-- Tabler Core -->
<script type="text/javascript" th:src="@{/js/tabler.min.js}"></script>
<script type="text/javascript" th:src="@{/js/demo.min.js}"></script>

<div class="wrapper">


    <!-- TODO 2 : NAV-BAR -->
    <div th:replace="~{manager/fragments/navbar-vertical :: fragment-nav-vertical}"></div>

    <div class="page-wrapper">
        <!-- TODO 1 : HEADER -->
        <div th:replace="~{common/fragments/header :: fragment-header}"></div>
        <div th:replace="~{manager/fragments/manager-header :: fragment-manager-header}"></div>

        <!-- TODO 3: BODY -->
        <div class="page-body">
            <div class="container-xl">
                <div class="row mb-3">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                회원 현황
                            </div>
                            <div class="card-body">
                                <table class="table card-table table-vcenter text-nowrap datatable">
                                    <thead>
                                    <tr>
                                        <th>회원수</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalMembers}"></td>
                                    <td th:text="${percentages.members}"></td>
                                    </tbody>
                                    <thead>
                                    <tr>
                                        <th>차단회원수</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalBlockedMembers}"></td>
                                    <td th:text="${percentages.blocked}"></td>
                                    </tbody>
                                    <thead>
                                    <tr>
                                        <th>탈퇴회원수</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalWithdrawMembers}"></td>
                                    <td th:text="${percentages.withdraws}"></td>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                등급별 현황
                            </div>
                            <div class="card-body">
                                <table class="table card-table table-vcenter text-nowrap datatable">
                                    <thead>
                                    <tr>
                                        <th>화이트등급</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalMembers}"></td>
                                    <td th:text="${percentages.white}"></td>
                                    </tbody>
                                    <thead>
                                    <tr>
                                        <th>브론즈등급</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalBronzeGrades}"></td>
                                    <td th:text="${percentages.bronze}"></td>
                                    </tbody>
                                    <thead>
                                    <tr>
                                        <th>실버등급</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalSilverGrades}"></td>
                                    <td th:text="${percentages.silver}"></td>
                                    </tbody>
                                    <thead>
                                    <tr>
                                        <th>골드등급</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalGoldGrades}"></td>
                                    <td th:text="${percentages.gold}"></td>
                                    </tbody>
                                    <thead>
                                    <tr>
                                        <th>플래티넘등급</th>
                                        <th>비율(%)</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <td th:text="${statistics.totalPlatinumGrades}"></td>
                                    <td th:text="${percentages.platinum}"></td>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <form action="/manager" method="get">
                            <div class="card">
                                <div class="card-header">
                                    <div class="col">
                                        매출 현황
                                    </div>
                                    <div class="col-auto ms-auto d-print-none btn-list">
                                        <span class="page-pretitle">시작일</span>
                                        <div class="input-icon">
                                            <input type="date" id="start-date" class="form-control" name="start" th:value="${start}">
                                        </div>
                                        <span class="page-pretitle">~ 종료일</span>
                                        <div class="input-icon">
                                            <input type="date" id="end-date" class="form-control" name="end" th:value="${end}">
                                        </div>
                                        <div class="input-icon">
                                            <button type="submit" class="btn btn-primary w-100 btn-icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-discount-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                    <path d="M5 7.2a2.2 2.2 0 0 1 2.2 -2.2h1a2.2 2.2 0 0 0 1.55 -.64l.7 -.7a2.2 2.2 0 0 1 3.12 0l.7 .7c.412 .41 .97 .64 1.55 .64h1a2.2 2.2 0 0 1 2.2 2.2v1c0 .58 .23 1.138 .64 1.55l.7 .7a2.2 2.2 0 0 1 0 3.12l-.7 .7a2.2 2.2 0 0 0 -.64 1.55v1a2.2 2.2 0 0 1 -2.2 2.2h-1a2.2 2.2 0 0 0 -1.55 .64l-.7 .7a2.2 2.2 0 0 1 -3.12 0l-.7 -.7a2.2 2.2 0 0 0 -1.55 -.64h-1a2.2 2.2 0 0 1 -2.2 -2.2v-1a2.2 2.2 0 0 0 -.64 -1.55l-.7 -.7a2.2 2.2 0 0 1 0 -3.12l.7 -.7a2.2 2.2 0 0 0 .64 -1.55v-1"></path>
                                                    <path d="M9 12l2 2l4 -4"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <table class="table card-table table-vcenter text-nowrap datatable">
                                        <thead>
                                        <tr>
                                            <th>No.</th>
                                            <th>제목</th>
                                            <th>주문(건)수</th>
                                            <th>주문개수</th>
                                            <th>순매출액</th>
                                            <th>취소(건)수</th>
                                            <th>취소개수</th>
                                            <th>취소액</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="sales, i : ${salesStatistics}">
                                            <td th:text="${i.count + currentPage * size}"></td>
                                            <td><a class="text-dark d-inline-block" th:text="${sales.title}" th:href="|/products/${sales.id}|" style="overflow: hidden; text-overflow: ellipsis; width: 400px;"/></td>
                                            <td th:text="${sales.numberOfOrders}"></td>
                                            <td th:text="${sales.totalQuantity}"></td>
                                            <td th:text="|${#numbers.formatInteger(sales.netSales, 1, 'COMMA')}원|"></td>
                                            <td class="text-center" th:text="${sales.numberOfOrderCancellations == 0 ? '' : sales.numberOfOrderCancellations}"></td>
                                            <td class="text-center" th:text="${sales.totalCancelQuantity == 0 ? '' : sales.totalCancelQuantity}"></td>
                                            <td class="text-center" th:text="${sales.cancelSales == '0' ? '' : #numbers.formatInteger(sales.cancelSales, 1, 'COMMA') + '원'}"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div th:replace="~{common/utils/paging-bar :: paging('/manager', '&start=' + ${start} + '&end=' + ${end})}"></div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- TODO 4 : footer -->
        <div th:replace="~{common/fragments/footer :: fragment-footer}"></div>
    </div>
</div>
<script>
    document.getElementById('start-date').addEventListener('change', () => {
        document.getElementById('end-date').setAttribute('min', document.getElementById('start-date').value);
    });

    document.getElementById('end-date').addEventListener('change', () => {
        document.getElementById('start-date').setAttribute('max', document.getElementById('end-date').value);
    });
</script>
</body>
</html>
